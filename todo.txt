fix name-sending bug and channel lost

